# 注意：本文件仅在本机使用，请勿提交到代码仓库或公开分享
# 已为 OKX 模拟盘（Demo Trading）与合约（USDT本位永续）测试给出合理默认值
# 如需实盘务必更换为全新密钥并将 OKX_SIMULATED=0（本文件默认=1，只有模拟盘）

##########################
# 1) 执行与熔断（交易主控）
##########################
# 运行模式：mock（本地模拟，不触发交易所）、real（调用交易所）、paused（暂停）
EXEC_MODE=real
# 外部控制文件（程序运行时可动态切换三态）
EXEC_CONTROL_FILE=data/exec_switch.json
# 启用 HTTP 管理接口（可在浏览器中查看状态/切换模式）
EXEC_HTTP_ENABLED=1
EXEC_HTTP_HOST=127.0.0.1
EXEC_HTTP_PORT=8088
# 账户基准权益（USD，用于熔断阈值参考）
BASE_EQUITY_USD=10000
# 单日最大亏损比例与单笔最大亏损比例（超过则暂停）
DAILY_MAX_LOSS_PCT=0.03
SINGLE_TRADE_MAX_LOSS_PCT=0.01
# 将价格变化近似折算为损益名义规模（越小越保守）
RISK_NOTIONAL_USD=100

##########################
# 2) 策略与运行开关
##########################
# 策略下单基础数量：
# - 现货：以币为单位（如 0.001 BTC）
# - 合约：以张为单位（如 1 表示 1 张）。建议从 1 张起步
TRADE_SIZE=1
# MA 突破策略参数（尽量稳健，5分钟级别，默认市价成交并设置0.5%止损）
MA_TIMEFRAME=5min
MA_FAST=10
MA_SLOW=30
MA_BREAKOUT_N=20
MA_BREAKOUT_BUFFER=0.0
MA_LOOKBACK_BARS=300
MA_ORDER_TYPE=market
MA_STOP_LOSS_PCT=0.005
# 策略轮询与冷却（避免频繁下单）
MA_POLL_SEC=20
MA_COOLDOWN_SEC=60
# 是否优先使用成交(trades)构造K线（数据充分时可更贴近真实）
MA_PREFER_TRADES=1
# 组件开关
COLLECTOR_ENABLED=1
MONITOR_ENABLED=1
AI_GATE_ENABLED=0

##########################
# 3) OKX REST（模拟盘 + 合约）
##########################
# 基础域名（模拟盘同样使用正式域名，区别在于请求头）
OKX_BASE_URL=https://www.okx.com
# 您提供的 API Key（仅用于模拟盘，切勿用于实盘）
OKX_API_KEY=ea2f78de-a081-42d0-816c-06e98496ecdc
OKX_API_SECRET=C69E1CB2456360D0B8B5A1110154FBBE
# Passphrase 必填（创建 API Key 时设置的口令）——请务必填写正确值，否则实盘请求会被拒绝
OKX_API_PASSPHRASE=W关于47147147...
# 开启 OKX 模拟盘请求头（x-simulated-trading: 1）
OKX_SIMULATED=1
# 交易模式：合约/杠杆使用 cross（全仓）或 isolated（逐仓）；现货用 cash
OKX_TD_MODE=cross
# 现货买入计量方式：base_ccy/quote_ccy（合约模式此项无效）
OKX_TGT_CCY=base_ccy

##########################
# 4) 行情订阅（WS）
##########################
# OKX 公共行情 WS 地址
OKX_WS_PUBLIC=wss://ws.okx.com:8443/ws/v5/public
# 订阅的交易对（合约：建议 *-USDT-SWAP），多个用英文逗号分隔
INSTRUMENTS=ETH-USDT-SWAP
# 频道固定为 trades 与 books5（代码内已默认）

##########################
# 5) 数据库（PostgreSQL/TimescaleDB 可选）
##########################
DB_HOST=localhost
DB_PORT=15432
DB_NAME=crypto
DB_USER=postgres
DB_PASSWORD=123456
DB_SSLMODE=prefer

##########################
# 6) 审计与结构化日志
##########################
AUDIT_ENABLED=1
AUDIT_TO_FILE=1
AUDIT_TO_DB=1
AUDIT_DIR=data/audit
AUDIT_FILE_PREFIX=audit

##########################
# 7) 告警渠道（默认关闭，可按需开启）
##########################
TG_ENABLED=0
TG_BOT_TOKEN=
TG_CHAT_ID=
SLACK_ENABLED=0
SLACK_BOT_TOKEN=
SLACK_CHANNEL=

##########################
# 8) 监控与可视化（轻量级）
##########################
# 轮询周期（秒）
MONITOR_POLL_SEC=1
# 不配置则复用 WS 的 INSTRUMENTS
# MONITOR_INSTRUMENTS=BTC-USDT-SWAP
# 是否启用 Web UI（当前仅终端输出，预留）
MONITOR_WEB_UI=0

##########################
# 9) AI 模块（默认本地或关闭远端调用）
##########################
AI_PROVIDER=local
AI_LOCAL_MODEL=Qwen/Qwen2.5-0.5B-Instruct
OPENAI_BASE_URL=https://api.openai.com
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini
AI_TEMPERATURE=0.2
AI_MAX_TOKENS=512
# 仅在触发异常时调用大模型
AI_ONLY_ANOMALY=1
# 异常触发阈值（可保持默认）
AI_TH_PRICE_JUMP=0.01
AI_TH_WHALE_USD=1000000
AI_TH_SENT_DROP=0.3

##########################
# 10) 告警阈值（系统内置监控）
##########################
ALERTS_ENABLED=1
ALERT_PRICE_JUMP_PCT=0.02
ALERT_STALE_BOOK_SEC=10
ALERT_TRADE_FAIL_WIN=60
ALERT_RATE_LIMIT_SEC=60

##########################
# 11) 风控（事前限额与滑点约束）
##########################
# 每个交易对最大持仓名义金额（USD）——先小额启动
RISK_MAX_POSITION_USD=2000
# 每个交易对允许的最大未完成订单数量
RISK_MAX_OPEN_ORDERS=3
# 单次下单占用权益最大比例（0-1），默认 0.3 对应基准权益 10,000 美元 -> 3,000 美元
RISK_SINGLE_ORDER_MAX_PCT_EQUITY=0.3
# 最大允许滑点（相对最优价/中间价比例）
RISK_MAX_SLIPPAGE_PCT=0.003
# 单笔/单日最大允许亏损（USD），与熔断解耦，属于事前校验
RISK_MAX_SINGLE_TRADE_LOSS_USD=80
RISK_MAX_DAILY_LOSS_USD=200